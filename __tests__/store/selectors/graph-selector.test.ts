import * as BigNumber from "bignumber.js";
import { DebtSerieSelectorResult, selectDebtSeries } from "../../../store/selectors/graph-selector";
import { AppState, store } from "../../../store/store";

describe("graph-selector", () => {
  it("Initial state - plot with a single identity data point", () => {
    const appState: Partial<AppState> = {
      ...store.getState(),
      debts: {
        ids: [],
        entities: {},
      },
      result: {
        useTowardsDebt: "0",
        useTowardsDebtType: "number",
      },
    };

    const expected: DebtSerieSelectorResult = {
      debtRestIntersection: -1,
      resolution: "Month",
      events: [],
      serie: [{ sumInterestPaidSoFar: 0, sumPaidSoFar: 0, x: 0, y: 0 }],
      restSerie: [{ x: 0, y: 0 }],
      restSerieNotAggregated: [{ x: 0, y: 0 }],
    };

    expect<DebtSerieSelectorResult>(selectDebtSeries(appState)).toEqual(expected);
  });

  describe("Performance", () => {
    it("Debt that quickly explodes to infinity - 500ms", () => {
      const appState: Partial<AppState> = {
        ...store.getState(),
        debts: {
          ids: ["1"],
          entities: {
            "1": {
              id: "1",
              amount: 100000,
              fee: 1000,
              interest: "50",
              name: "",
              type: "credit",
            },
          },
        },
        result: {
          useTowardsDebt: "0",
          useTowardsDebtType: "number",
        },
      };

      const start = performance.now();
      selectDebtSeries(appState);
      const end = performance.now();

      expect(end - start).toBeLessThan(300);
    });
  });

  it("One loan - Annuity", () => {
    const appState: Partial<AppState> = {
      ...store.getState(),
      debts: {
        ids: ["1"],
        entities: {
          "1": {
            id: "1",
            amount: 1000000,
            fee: 65,
            interest: "4",
            name: "One loan - Annuity",
            type: "annuity",
            termins: 36,
          },
        },
      },
      result: {
        useTowardsDebt: "30000",
        useTowardsDebtType: "number",
      },
    };

    const expected: DebtSerieSelectorResult = {
      debtRestIntersection: 36,
      resolution: "Month",
      events: [
        {
          debt: {
            initial: {
              id: "1",
              name: "One loan - Annuity",
              fee: 65,
              interest: "4",
              amount: 1000000,
              type: "annuity",
              termins: 36,
            },
            history: [
              {
                month: 1,
                paidSoFar: BigNumber.BigNumber(29589),
                remaining: BigNumber.BigNumber(973809.33),
                interestPaidSoFar: BigNumber.BigNumber(3333.33),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(973809.33),
                  interestAmount: BigNumber.BigNumber(3333.33),
                  principalAmount: BigNumber.BigNumber(26190.67),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 2,
                paidSoFar: BigNumber.BigNumber(59178),
                remaining: BigNumber.BigNumber(947531.36),
                interestPaidSoFar: BigNumber.BigNumber(6579.36),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(947531.36),
                  interestAmount: BigNumber.BigNumber(3246.03),
                  principalAmount: BigNumber.BigNumber(26277.97),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 3,
                paidSoFar: BigNumber.BigNumber(88767),
                remaining: BigNumber.BigNumber(921165.8),
                interestPaidSoFar: BigNumber.BigNumber(9737.8),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(921165.8),
                  interestAmount: BigNumber.BigNumber(3158.44),
                  principalAmount: BigNumber.BigNumber(26365.56),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 4,
                paidSoFar: BigNumber.BigNumber(118356),
                remaining: BigNumber.BigNumber(894712.35),
                interestPaidSoFar: BigNumber.BigNumber(12808.35),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(894712.35),
                  interestAmount: BigNumber.BigNumber(3070.55),
                  principalAmount: BigNumber.BigNumber(26453.45),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 5,
                paidSoFar: BigNumber.BigNumber(147945),
                remaining: BigNumber.BigNumber(868170.72),
                interestPaidSoFar: BigNumber.BigNumber(15790.72),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(868170.72),
                  interestAmount: BigNumber.BigNumber(2982.37),
                  principalAmount: BigNumber.BigNumber(26541.63),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 6,
                paidSoFar: BigNumber.BigNumber(177534),
                remaining: BigNumber.BigNumber(841540.62),
                interestPaidSoFar: BigNumber.BigNumber(18684.62),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(841540.62),
                  interestAmount: BigNumber.BigNumber(2893.9),
                  principalAmount: BigNumber.BigNumber(26630.1),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 7,
                paidSoFar: BigNumber.BigNumber(207123),
                remaining: BigNumber.BigNumber(814821.76),
                interestPaidSoFar: BigNumber.BigNumber(21489.76),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(814821.76),
                  interestAmount: BigNumber.BigNumber(2805.14),
                  principalAmount: BigNumber.BigNumber(26718.86),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 8,
                paidSoFar: BigNumber.BigNumber(236712),
                remaining: BigNumber.BigNumber(788013.83),
                interestPaidSoFar: BigNumber.BigNumber(24205.83),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(788013.83),
                  interestAmount: BigNumber.BigNumber(2716.07),
                  principalAmount: BigNumber.BigNumber(26807.93),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 9,
                paidSoFar: BigNumber.BigNumber(266301),
                remaining: BigNumber.BigNumber(761116.54),
                interestPaidSoFar: BigNumber.BigNumber(26832.54),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(761116.54),
                  interestAmount: BigNumber.BigNumber(2626.71),
                  principalAmount: BigNumber.BigNumber(26897.29),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 10,
                paidSoFar: BigNumber.BigNumber(295890),
                remaining: BigNumber.BigNumber(734129.6),
                interestPaidSoFar: BigNumber.BigNumber(29369.6),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(734129.6),
                  interestAmount: BigNumber.BigNumber(2537.06),
                  principalAmount: BigNumber.BigNumber(26986.94),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 11,
                paidSoFar: BigNumber.BigNumber(325479),
                remaining: BigNumber.BigNumber(707052.7),
                interestPaidSoFar: BigNumber.BigNumber(31816.7),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(707052.7),
                  interestAmount: BigNumber.BigNumber(2447.1),
                  principalAmount: BigNumber.BigNumber(27076.9),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 12,
                paidSoFar: BigNumber.BigNumber(355068),
                remaining: BigNumber.BigNumber(679885.54),
                interestPaidSoFar: BigNumber.BigNumber(34173.54),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(679885.54),
                  interestAmount: BigNumber.BigNumber(2356.84),
                  principalAmount: BigNumber.BigNumber(27167.16),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 13,
                paidSoFar: BigNumber.BigNumber(384657),
                remaining: BigNumber.BigNumber(652627.83),
                interestPaidSoFar: BigNumber.BigNumber(36439.83),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(652627.83),
                  interestAmount: BigNumber.BigNumber(2266.29),
                  principalAmount: BigNumber.BigNumber(27257.71),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 14,
                paidSoFar: BigNumber.BigNumber(414246),
                remaining: BigNumber.BigNumber(625279.26),
                interestPaidSoFar: BigNumber.BigNumber(38615.26),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(625279.26),
                  interestAmount: BigNumber.BigNumber(2175.43),
                  principalAmount: BigNumber.BigNumber(27348.57),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 15,
                paidSoFar: BigNumber.BigNumber(443835),
                remaining: BigNumber.BigNumber(597839.52),
                interestPaidSoFar: BigNumber.BigNumber(40699.52),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(597839.52),
                  interestAmount: BigNumber.BigNumber(2084.26),
                  principalAmount: BigNumber.BigNumber(27439.74),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 16,
                paidSoFar: BigNumber.BigNumber(473424),
                remaining: BigNumber.BigNumber(570308.32),
                interestPaidSoFar: BigNumber.BigNumber(42692.32),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(570308.32),
                  interestAmount: BigNumber.BigNumber(1992.8),
                  principalAmount: BigNumber.BigNumber(27531.2),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 17,
                paidSoFar: BigNumber.BigNumber(503013),
                remaining: BigNumber.BigNumber(542685.35),
                interestPaidSoFar: BigNumber.BigNumber(44593.35),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(542685.35),
                  interestAmount: BigNumber.BigNumber(1901.03),
                  principalAmount: BigNumber.BigNumber(27622.97),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 18,
                paidSoFar: BigNumber.BigNumber(532602),
                remaining: BigNumber.BigNumber(514970.3),
                interestPaidSoFar: BigNumber.BigNumber(46402.3),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(514970.3),
                  interestAmount: BigNumber.BigNumber(1808.95),
                  principalAmount: BigNumber.BigNumber(27715.05),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 19,
                paidSoFar: BigNumber.BigNumber(562191),
                remaining: BigNumber.BigNumber(487162.87),
                interestPaidSoFar: BigNumber.BigNumber(48118.87),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(487162.87),
                  interestAmount: BigNumber.BigNumber(1716.57),
                  principalAmount: BigNumber.BigNumber(27807.43),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 20,
                paidSoFar: BigNumber.BigNumber(591780),
                remaining: BigNumber.BigNumber(459262.75),
                interestPaidSoFar: BigNumber.BigNumber(49742.75),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(459262.75),
                  interestAmount: BigNumber.BigNumber(1623.88),
                  principalAmount: BigNumber.BigNumber(27900.12),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 21,
                paidSoFar: BigNumber.BigNumber(621369),
                remaining: BigNumber.BigNumber(431269.63),
                interestPaidSoFar: BigNumber.BigNumber(51273.63),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(431269.63),
                  interestAmount: BigNumber.BigNumber(1530.88),
                  principalAmount: BigNumber.BigNumber(27993.12),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 22,
                paidSoFar: BigNumber.BigNumber(650958),
                remaining: BigNumber.BigNumber(403183.2),
                interestPaidSoFar: BigNumber.BigNumber(52711.2),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(403183.2),
                  interestAmount: BigNumber.BigNumber(1437.57),
                  principalAmount: BigNumber.BigNumber(28086.43),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 23,
                paidSoFar: BigNumber.BigNumber(680547),
                remaining: BigNumber.BigNumber(375003.14),
                interestPaidSoFar: BigNumber.BigNumber(54055.14),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(375003.14),
                  interestAmount: BigNumber.BigNumber(1343.94),
                  principalAmount: BigNumber.BigNumber(28180.06),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 24,
                paidSoFar: BigNumber.BigNumber(710136),
                remaining: BigNumber.BigNumber(346729.15),
                interestPaidSoFar: BigNumber.BigNumber(55305.15),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(346729.15),
                  interestAmount: BigNumber.BigNumber(1250.01),
                  principalAmount: BigNumber.BigNumber(28273.99),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 25,
                paidSoFar: BigNumber.BigNumber(739725),
                remaining: BigNumber.BigNumber(318360.91),
                interestPaidSoFar: BigNumber.BigNumber(56460.91),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(318360.91),
                  interestAmount: BigNumber.BigNumber(1155.76),
                  principalAmount: BigNumber.BigNumber(28368.24),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 26,
                paidSoFar: BigNumber.BigNumber(769314),
                remaining: BigNumber.BigNumber(289898.11),
                interestPaidSoFar: BigNumber.BigNumber(57522.11),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(289898.11),
                  interestAmount: BigNumber.BigNumber(1061.2),
                  principalAmount: BigNumber.BigNumber(28462.8),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 27,
                paidSoFar: BigNumber.BigNumber(798903),
                remaining: BigNumber.BigNumber(261340.44),
                interestPaidSoFar: BigNumber.BigNumber(58488.44),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(261340.44),
                  interestAmount: BigNumber.BigNumber(966.33),
                  principalAmount: BigNumber.BigNumber(28557.67),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 28,
                paidSoFar: BigNumber.BigNumber(828492),
                remaining: BigNumber.BigNumber(232687.57),
                interestPaidSoFar: BigNumber.BigNumber(59359.57),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(232687.57),
                  interestAmount: BigNumber.BigNumber(871.13),
                  principalAmount: BigNumber.BigNumber(28652.87),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 29,
                paidSoFar: BigNumber.BigNumber(858081),
                remaining: BigNumber.BigNumber(203939.2),
                interestPaidSoFar: BigNumber.BigNumber(60135.2),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(203939.2),
                  interestAmount: BigNumber.BigNumber(775.63),
                  principalAmount: BigNumber.BigNumber(28748.37),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 30,
                paidSoFar: BigNumber.BigNumber(887670),
                remaining: BigNumber.BigNumber(175095),
                interestPaidSoFar: BigNumber.BigNumber(60815),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(175095),
                  interestAmount: BigNumber.BigNumber(679.8),
                  principalAmount: BigNumber.BigNumber(28844.2),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 31,
                paidSoFar: BigNumber.BigNumber(917259),
                remaining: BigNumber.BigNumber(146154.65),
                interestPaidSoFar: BigNumber.BigNumber(61398.65),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(146154.65),
                  interestAmount: BigNumber.BigNumber(583.65),
                  principalAmount: BigNumber.BigNumber(28940.35),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 32,
                paidSoFar: BigNumber.BigNumber(946848),
                remaining: BigNumber.BigNumber(117117.83),
                interestPaidSoFar: BigNumber.BigNumber(61885.83),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(117117.83),
                  interestAmount: BigNumber.BigNumber(487.18),
                  principalAmount: BigNumber.BigNumber(29036.82),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 33,
                paidSoFar: BigNumber.BigNumber(976437),
                remaining: BigNumber.BigNumber(87984.22),
                interestPaidSoFar: BigNumber.BigNumber(62276.22),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(87984.22),
                  interestAmount: BigNumber.BigNumber(390.39),
                  principalAmount: BigNumber.BigNumber(29133.61),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 34,
                paidSoFar: BigNumber.BigNumber(1006026),
                remaining: BigNumber.BigNumber(58753.5),
                interestPaidSoFar: BigNumber.BigNumber(62569.5),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(58753.5),
                  interestAmount: BigNumber.BigNumber(293.28),
                  principalAmount: BigNumber.BigNumber(29230.72),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 35,
                paidSoFar: BigNumber.BigNumber(1035615),
                remaining: BigNumber.BigNumber(29425.34),
                interestPaidSoFar: BigNumber.BigNumber(62765.34),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(29425.34),
                  interestAmount: BigNumber.BigNumber(195.84),
                  principalAmount: BigNumber.BigNumber(29328.16),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 36,
                paidSoFar: BigNumber.BigNumber(1065203.42),
                remaining: BigNumber.BigNumber(0),
                interestPaidSoFar: BigNumber.BigNumber(62863.42),
                terminResult: {
                  newRest: BigNumber.BigNumber(411.58),
                  newDebt: BigNumber.BigNumber(0),
                  interestAmount: BigNumber.BigNumber(98.08),
                  principalAmount: BigNumber.BigNumber(29425.34),
                  terminAmount: BigNumber.BigNumber(29588.42),
                },
              },
            ],
            processed: {
              interestPaidSoFar: BigNumber.BigNumber(62863.42),
              paidSoFar: BigNumber.BigNumber(1065203.42),
              remaining: BigNumber.BigNumber(0),
            },
          },
          month: 36,
          type: "DEBT_PAID_OFF",
        },
      ],
      serie: [
        { sumInterestPaidSoFar: 0, sumPaidSoFar: 0, x: 0, y: 1000000 },
        { sumInterestPaidSoFar: 3333, sumPaidSoFar: 29589, x: 1, y: 973809 },
        { sumInterestPaidSoFar: 6579, sumPaidSoFar: 59178, x: 2, y: 947531 },
        { sumInterestPaidSoFar: 9738, sumPaidSoFar: 88767, x: 3, y: 921166 },
        { sumInterestPaidSoFar: 12808, sumPaidSoFar: 118356, x: 4, y: 894712 },
        { sumInterestPaidSoFar: 15791, sumPaidSoFar: 147945, x: 5, y: 868171 },
        { sumInterestPaidSoFar: 18685, sumPaidSoFar: 177534, x: 6, y: 841541 },
        { sumInterestPaidSoFar: 21490, sumPaidSoFar: 207123, x: 7, y: 814822 },
        { sumInterestPaidSoFar: 24206, sumPaidSoFar: 236712, x: 8, y: 788014 },
        { sumInterestPaidSoFar: 26833, sumPaidSoFar: 266301, x: 9, y: 761117 },
        { sumInterestPaidSoFar: 29370, sumPaidSoFar: 295890, x: 10, y: 734130 },
        { sumInterestPaidSoFar: 31817, sumPaidSoFar: 325479, x: 11, y: 707053 },
        { sumInterestPaidSoFar: 34174, sumPaidSoFar: 355068, x: 12, y: 679886 },
        { sumInterestPaidSoFar: 36440, sumPaidSoFar: 384657, x: 13, y: 652628 },
        { sumInterestPaidSoFar: 38615, sumPaidSoFar: 414246, x: 14, y: 625279 },
        { sumInterestPaidSoFar: 40700, sumPaidSoFar: 443835, x: 15, y: 597840 },
        { sumInterestPaidSoFar: 42692, sumPaidSoFar: 473424, x: 16, y: 570308 },
        { sumInterestPaidSoFar: 44593, sumPaidSoFar: 503013, x: 17, y: 542685 },
        { sumInterestPaidSoFar: 46402, sumPaidSoFar: 532602, x: 18, y: 514970 },
        { sumInterestPaidSoFar: 48119, sumPaidSoFar: 562191, x: 19, y: 487163 },
        { sumInterestPaidSoFar: 49743, sumPaidSoFar: 591780, x: 20, y: 459263 },
        { sumInterestPaidSoFar: 51274, sumPaidSoFar: 621369, x: 21, y: 431270 },
        { sumInterestPaidSoFar: 52711, sumPaidSoFar: 650958, x: 22, y: 403183 },
        { sumInterestPaidSoFar: 54055, sumPaidSoFar: 680547, x: 23, y: 375003 },
        { sumInterestPaidSoFar: 55305, sumPaidSoFar: 710136, x: 24, y: 346729 },
        { sumInterestPaidSoFar: 56461, sumPaidSoFar: 739725, x: 25, y: 318361 },
        { sumInterestPaidSoFar: 57522, sumPaidSoFar: 769314, x: 26, y: 289898 },
        { sumInterestPaidSoFar: 58488, sumPaidSoFar: 798903, x: 27, y: 261340 },
        { sumInterestPaidSoFar: 59360, sumPaidSoFar: 828492, x: 28, y: 232688 },
        { sumInterestPaidSoFar: 60135, sumPaidSoFar: 858081, x: 29, y: 203939 },
        { sumInterestPaidSoFar: 60815, sumPaidSoFar: 887670, x: 30, y: 175095 },
        { sumInterestPaidSoFar: 61399, sumPaidSoFar: 917259, x: 31, y: 146155 },
        { sumInterestPaidSoFar: 61886, sumPaidSoFar: 946848, x: 32, y: 117118 },
        { sumInterestPaidSoFar: 62276, sumPaidSoFar: 976437, x: 33, y: 87984 },
        { sumInterestPaidSoFar: 62570, sumPaidSoFar: 1006026, x: 34, y: 58754 },
        { sumInterestPaidSoFar: 62765, sumPaidSoFar: 1035615, x: 35, y: 29425 },
        { sumInterestPaidSoFar: 62863, sumPaidSoFar: 1065203, x: 36, y: 0 },
      ],
      restSerie: [
        { x: 0, y: 0 },
        { x: 1, y: 411 },
        { x: 2, y: 822 },
        { x: 3, y: 1233 },
        { x: 4, y: 1644 },
        { x: 5, y: 2055 },
        { x: 6, y: 2466 },
        { x: 7, y: 2877 },
        { x: 8, y: 3288 },
        { x: 9, y: 3699 },
        { x: 10, y: 4110 },
        { x: 11, y: 4521 },
        { x: 12, y: 4932 },
        { x: 13, y: 5343 },
        { x: 14, y: 5754 },
        { x: 15, y: 6165 },
        { x: 16, y: 6576 },
        { x: 17, y: 6987 },
        { x: 18, y: 7398 },
        { x: 19, y: 7809 },
        { x: 20, y: 8220 },
        { x: 21, y: 8631 },
        { x: 22, y: 9042 },
        { x: 23, y: 9453 },
        { x: 24, y: 9864 },
        { x: 25, y: 10275 },
        { x: 26, y: 10686 },
        { x: 27, y: 11097 },
        { x: 28, y: 11508 },
        { x: 29, y: 11919 },
        { x: 30, y: 12330 },
        { x: 31, y: 12741 },
        { x: 32, y: 13152 },
        { x: 33, y: 13563 },
        { x: 34, y: 13974 },
        { x: 35, y: 14385 },
        { x: 36, y: 14797 },
      ],
      restSerieNotAggregated: [
        { x: 0, y: 0 },
        { x: 1, y: 411 },
        { x: 2, y: 822 },
        { x: 3, y: 1233 },
        { x: 4, y: 1644 },
        { x: 5, y: 2055 },
        { x: 6, y: 2466 },
        { x: 7, y: 2877 },
        { x: 8, y: 3288 },
        { x: 9, y: 3699 },
        { x: 10, y: 4110 },
        { x: 11, y: 4521 },
        { x: 12, y: 4932 },
        { x: 13, y: 5343 },
        { x: 14, y: 5754 },
        { x: 15, y: 6165 },
        { x: 16, y: 6576 },
        { x: 17, y: 6987 },
        { x: 18, y: 7398 },
        { x: 19, y: 7809 },
        { x: 20, y: 8220 },
        { x: 21, y: 8631 },
        { x: 22, y: 9042 },
        { x: 23, y: 9453 },
        { x: 24, y: 9864 },
        { x: 25, y: 10275 },
        { x: 26, y: 10686 },
        { x: 27, y: 11097 },
        { x: 28, y: 11508 },
        { x: 29, y: 11919 },
        { x: 30, y: 12330 },
        { x: 31, y: 12741 },
        { x: 32, y: 13152 },
        { x: 33, y: 13563 },
        { x: 34, y: 13974 },
        { x: 35, y: 14385 },
        { x: 36, y: 14797 },
      ],
    };

    expect<DebtSerieSelectorResult>(selectDebtSeries(appState)).toEqual(expected);
  });
});
