import * as BigNumber from "bignumber.js";
import { DebtSerieSelectorResult, selectDebtSeries } from "../../../store/selectors/graph-selector";
import { AppState, store } from "../../../store/store";

describe("graph-selector", () => {
  it("Initial state - plot with a single identity data point", () => {
    const appState: Partial<AppState> = {
      ...store.getState(),
      debts: {
        ids: [],
        entities: {},
      },
      result: {
        useTowardsDebt: "0",
        useTowardsDebtType: "number",
      },
    };

    const expected: DebtSerieSelectorResult = {
      debtRestIntersection: -1,
      resolution: "Month",
      events: [],
      serie: [{ sumInterestPaidSoFar: 0, sumPaidSoFar: 0, x: 0, y: 0 }],
      restSerie: [{ x: 0, y: 0 }],
      restSerieNotAggregated: [{ x: 0, y: 0 }],
    };

    expect<DebtSerieSelectorResult>(selectDebtSeries(appState)).toEqual(expected);
  });

  describe("Performance", () => {
    it("Debt that quickly explodes to infinity - 500ms", () => {
      const appState: Partial<AppState> = {
        ...store.getState(),
        debts: {
          ids: ["1"],
          entities: {
            "1": {
              id: "1",
              amount: 100000,
              fee: 1000,
              interest: "50",
              name: "",
              type: "credit",
            },
          },
        },
        result: {
          useTowardsDebt: "0",
          useTowardsDebtType: "number",
        },
      };

      const start = performance.now();
      selectDebtSeries(appState);
      const end = performance.now();

      expect(end - start).toBeLessThan(300);
    });
  });

  it("One loan - Annuity", () => {
    const appState: Partial<AppState> = {
      ...store.getState(),
      debts: {
        ids: ["1"],
        entities: {
          "1": {
            id: "1",
            amount: 1000000,
            fee: 65,
            interest: "4",
            name: "One loan - Annuity",
            type: "annuity",
            termins: 36,
          },
        },
      },
      result: {
        useTowardsDebt: "30000",
        useTowardsDebtType: "number",
      },
    };

    const expected: DebtSerieSelectorResult = {
      debtRestIntersection: 36,
      resolution: "Month",
      events: [
        {
          debt: {
            initial: {
              id: "1",
              name: "One loan - Annuity",
              fee: 65,
              interest: "4",
              amount: 1000000,
              type: "annuity",
              termins: 36,
            },
            history: [
              {
                month: 1,
                paidSoFar: BigNumber.BigNumber(29589),
                remaining: BigNumber.BigNumber(973809.33),
                interestPaidSoFar: BigNumber.BigNumber(3333.33),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(973809.33),
                  interestAmount: BigNumber.BigNumber(3333.33),
                  principalAmount: BigNumber.BigNumber(26190.67),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 2,
                paidSoFar: BigNumber.BigNumber(59178),
                remaining: BigNumber.BigNumber(947531.36),
                interestPaidSoFar: BigNumber.BigNumber(6579.36),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(947531.36),
                  interestAmount: BigNumber.BigNumber(3246.03),
                  principalAmount: BigNumber.BigNumber(26277.97),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 3,
                paidSoFar: BigNumber.BigNumber(88767),
                remaining: BigNumber.BigNumber(921165.8),
                interestPaidSoFar: BigNumber.BigNumber(9737.8),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(921165.8),
                  interestAmount: BigNumber.BigNumber(3158.44),
                  principalAmount: BigNumber.BigNumber(26365.56),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 4,
                paidSoFar: BigNumber.BigNumber(118356),
                remaining: BigNumber.BigNumber(894712.35),
                interestPaidSoFar: BigNumber.BigNumber(12808.35),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(894712.35),
                  interestAmount: BigNumber.BigNumber(3070.55),
                  principalAmount: BigNumber.BigNumber(26453.45),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 5,
                paidSoFar: BigNumber.BigNumber(147945),
                remaining: BigNumber.BigNumber(868170.72),
                interestPaidSoFar: BigNumber.BigNumber(15790.72),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(868170.72),
                  interestAmount: BigNumber.BigNumber(2982.37),
                  principalAmount: BigNumber.BigNumber(26541.63),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 6,
                paidSoFar: BigNumber.BigNumber(177534),
                remaining: BigNumber.BigNumber(841540.62),
                interestPaidSoFar: BigNumber.BigNumber(18684.62),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(841540.62),
                  interestAmount: BigNumber.BigNumber(2893.9),
                  principalAmount: BigNumber.BigNumber(26630.1),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 7,
                paidSoFar: BigNumber.BigNumber(207123),
                remaining: BigNumber.BigNumber(814821.76),
                interestPaidSoFar: BigNumber.BigNumber(21489.76),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(814821.76),
                  interestAmount: BigNumber.BigNumber(2805.14),
                  principalAmount: BigNumber.BigNumber(26718.86),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 8,
                paidSoFar: BigNumber.BigNumber(236712),
                remaining: BigNumber.BigNumber(788013.83),
                interestPaidSoFar: BigNumber.BigNumber(24205.83),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(788013.83),
                  interestAmount: BigNumber.BigNumber(2716.07),
                  principalAmount: BigNumber.BigNumber(26807.93),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 9,
                paidSoFar: BigNumber.BigNumber(266301),
                remaining: BigNumber.BigNumber(761116.54),
                interestPaidSoFar: BigNumber.BigNumber(26832.54),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(761116.54),
                  interestAmount: BigNumber.BigNumber(2626.71),
                  principalAmount: BigNumber.BigNumber(26897.29),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 10,
                paidSoFar: BigNumber.BigNumber(295890),
                remaining: BigNumber.BigNumber(734129.6),
                interestPaidSoFar: BigNumber.BigNumber(29369.6),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(734129.6),
                  interestAmount: BigNumber.BigNumber(2537.06),
                  principalAmount: BigNumber.BigNumber(26986.94),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 11,
                paidSoFar: BigNumber.BigNumber(325479),
                remaining: BigNumber.BigNumber(707052.7),
                interestPaidSoFar: BigNumber.BigNumber(31816.7),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(707052.7),
                  interestAmount: BigNumber.BigNumber(2447.1),
                  principalAmount: BigNumber.BigNumber(27076.9),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 12,
                paidSoFar: BigNumber.BigNumber(355068),
                remaining: BigNumber.BigNumber(679885.54),
                interestPaidSoFar: BigNumber.BigNumber(34173.54),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(679885.54),
                  interestAmount: BigNumber.BigNumber(2356.84),
                  principalAmount: BigNumber.BigNumber(27167.16),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 13,
                paidSoFar: BigNumber.BigNumber(384657),
                remaining: BigNumber.BigNumber(652627.83),
                interestPaidSoFar: BigNumber.BigNumber(36439.83),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(652627.83),
                  interestAmount: BigNumber.BigNumber(2266.29),
                  principalAmount: BigNumber.BigNumber(27257.71),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 14,
                paidSoFar: BigNumber.BigNumber(414246),
                remaining: BigNumber.BigNumber(625279.26),
                interestPaidSoFar: BigNumber.BigNumber(38615.26),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(625279.26),
                  interestAmount: BigNumber.BigNumber(2175.43),
                  principalAmount: BigNumber.BigNumber(27348.57),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 15,
                paidSoFar: BigNumber.BigNumber(443835),
                remaining: BigNumber.BigNumber(597839.52),
                interestPaidSoFar: BigNumber.BigNumber(40699.52),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(597839.52),
                  interestAmount: BigNumber.BigNumber(2084.26),
                  principalAmount: BigNumber.BigNumber(27439.74),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 16,
                paidSoFar: BigNumber.BigNumber(473424),
                remaining: BigNumber.BigNumber(570308.32),
                interestPaidSoFar: BigNumber.BigNumber(42692.32),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(570308.32),
                  interestAmount: BigNumber.BigNumber(1992.8),
                  principalAmount: BigNumber.BigNumber(27531.2),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 17,
                paidSoFar: BigNumber.BigNumber(503013),
                remaining: BigNumber.BigNumber(542685.35),
                interestPaidSoFar: BigNumber.BigNumber(44593.35),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(542685.35),
                  interestAmount: BigNumber.BigNumber(1901.03),
                  principalAmount: BigNumber.BigNumber(27622.97),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 18,
                paidSoFar: BigNumber.BigNumber(532602),
                remaining: BigNumber.BigNumber(514970.3),
                interestPaidSoFar: BigNumber.BigNumber(46402.3),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(514970.3),
                  interestAmount: BigNumber.BigNumber(1808.95),
                  principalAmount: BigNumber.BigNumber(27715.05),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 19,
                paidSoFar: BigNumber.BigNumber(562191),
                remaining: BigNumber.BigNumber(487162.87),
                interestPaidSoFar: BigNumber.BigNumber(48118.87),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(487162.87),
                  interestAmount: BigNumber.BigNumber(1716.57),
                  principalAmount: BigNumber.BigNumber(27807.43),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 20,
                paidSoFar: BigNumber.BigNumber(591780),
                remaining: BigNumber.BigNumber(459262.75),
                interestPaidSoFar: BigNumber.BigNumber(49742.75),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(459262.75),
                  interestAmount: BigNumber.BigNumber(1623.88),
                  principalAmount: BigNumber.BigNumber(27900.12),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 21,
                paidSoFar: BigNumber.BigNumber(621369),
                remaining: BigNumber.BigNumber(431269.63),
                interestPaidSoFar: BigNumber.BigNumber(51273.63),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(431269.63),
                  interestAmount: BigNumber.BigNumber(1530.88),
                  principalAmount: BigNumber.BigNumber(27993.12),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 22,
                paidSoFar: BigNumber.BigNumber(650958),
                remaining: BigNumber.BigNumber(403183.2),
                interestPaidSoFar: BigNumber.BigNumber(52711.2),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(403183.2),
                  interestAmount: BigNumber.BigNumber(1437.57),
                  principalAmount: BigNumber.BigNumber(28086.43),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 23,
                paidSoFar: BigNumber.BigNumber(680547),
                remaining: BigNumber.BigNumber(375003.14),
                interestPaidSoFar: BigNumber.BigNumber(54055.14),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(375003.14),
                  interestAmount: BigNumber.BigNumber(1343.94),
                  principalAmount: BigNumber.BigNumber(28180.06),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 24,
                paidSoFar: BigNumber.BigNumber(710136),
                remaining: BigNumber.BigNumber(346729.15),
                interestPaidSoFar: BigNumber.BigNumber(55305.15),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(346729.15),
                  interestAmount: BigNumber.BigNumber(1250.01),
                  principalAmount: BigNumber.BigNumber(28273.99),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 25,
                paidSoFar: BigNumber.BigNumber(739725),
                remaining: BigNumber.BigNumber(318360.91),
                interestPaidSoFar: BigNumber.BigNumber(56460.91),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(318360.91),
                  interestAmount: BigNumber.BigNumber(1155.76),
                  principalAmount: BigNumber.BigNumber(28368.24),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 26,
                paidSoFar: BigNumber.BigNumber(769314),
                remaining: BigNumber.BigNumber(289898.11),
                interestPaidSoFar: BigNumber.BigNumber(57522.11),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(289898.11),
                  interestAmount: BigNumber.BigNumber(1061.2),
                  principalAmount: BigNumber.BigNumber(28462.8),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 27,
                paidSoFar: BigNumber.BigNumber(798903),
                remaining: BigNumber.BigNumber(261340.44),
                interestPaidSoFar: BigNumber.BigNumber(58488.44),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(261340.44),
                  interestAmount: BigNumber.BigNumber(966.33),
                  principalAmount: BigNumber.BigNumber(28557.67),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 28,
                paidSoFar: BigNumber.BigNumber(828492),
                remaining: BigNumber.BigNumber(232687.57),
                interestPaidSoFar: BigNumber.BigNumber(59359.57),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(232687.57),
                  interestAmount: BigNumber.BigNumber(871.13),
                  principalAmount: BigNumber.BigNumber(28652.87),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 29,
                paidSoFar: BigNumber.BigNumber(858081),
                remaining: BigNumber.BigNumber(203939.2),
                interestPaidSoFar: BigNumber.BigNumber(60135.2),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(203939.2),
                  interestAmount: BigNumber.BigNumber(775.63),
                  principalAmount: BigNumber.BigNumber(28748.37),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 30,
                paidSoFar: BigNumber.BigNumber(887670),
                remaining: BigNumber.BigNumber(175095),
                interestPaidSoFar: BigNumber.BigNumber(60815),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(175095),
                  interestAmount: BigNumber.BigNumber(679.8),
                  principalAmount: BigNumber.BigNumber(28844.2),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 31,
                paidSoFar: BigNumber.BigNumber(917259),
                remaining: BigNumber.BigNumber(146154.65),
                interestPaidSoFar: BigNumber.BigNumber(61398.65),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(146154.65),
                  interestAmount: BigNumber.BigNumber(583.65),
                  principalAmount: BigNumber.BigNumber(28940.35),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 32,
                paidSoFar: BigNumber.BigNumber(946848),
                remaining: BigNumber.BigNumber(117117.83),
                interestPaidSoFar: BigNumber.BigNumber(61885.83),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(117117.83),
                  interestAmount: BigNumber.BigNumber(487.18),
                  principalAmount: BigNumber.BigNumber(29036.82),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 33,
                paidSoFar: BigNumber.BigNumber(976437),
                remaining: BigNumber.BigNumber(87984.22),
                interestPaidSoFar: BigNumber.BigNumber(62276.22),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(87984.22),
                  interestAmount: BigNumber.BigNumber(390.39),
                  principalAmount: BigNumber.BigNumber(29133.61),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 34,
                paidSoFar: BigNumber.BigNumber(1006026),
                remaining: BigNumber.BigNumber(58753.5),
                interestPaidSoFar: BigNumber.BigNumber(62569.5),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(58753.5),
                  interestAmount: BigNumber.BigNumber(293.28),
                  principalAmount: BigNumber.BigNumber(29230.72),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 35,
                paidSoFar: BigNumber.BigNumber(1035615),
                remaining: BigNumber.BigNumber(29425.34),
                interestPaidSoFar: BigNumber.BigNumber(62765.34),
                terminResult: {
                  newRest: BigNumber.BigNumber(411),
                  newDebt: BigNumber.BigNumber(29425.34),
                  interestAmount: BigNumber.BigNumber(195.84),
                  principalAmount: BigNumber.BigNumber(29328.16),
                  terminAmount: BigNumber.BigNumber(29589),
                },
              },
              {
                month: 36,
                paidSoFar: BigNumber.BigNumber(1065203.42),
                remaining: BigNumber.BigNumber(0),
                interestPaidSoFar: BigNumber.BigNumber(62863.42),
                terminResult: {
                  newRest: BigNumber.BigNumber(411.58),
                  newDebt: BigNumber.BigNumber(0),
                  interestAmount: BigNumber.BigNumber(98.08),
                  principalAmount: BigNumber.BigNumber(29425.34),
                  terminAmount: BigNumber.BigNumber(29588.42),
                },
              },
            ],
            processed: {
              interestPaidSoFar: BigNumber.BigNumber(62863.42),
              paidSoFar: BigNumber.BigNumber(1065203.42),
              remaining: BigNumber.BigNumber(0),
            },
          },
          month: 36,
          type: "DEBT_PAID_OFF",
        },
      ],
      serie: [
        { sumInterestPaidSoFar: 0, sumPaidSoFar: 0, x: 0, y: 1000000 },
        { sumInterestPaidSoFar: 3333, sumPaidSoFar: 29589, x: 1, y: 973809 },
        { sumInterestPaidSoFar: 6579, sumPaidSoFar: 59178, x: 2, y: 947531 },
        { sumInterestPaidSoFar: 9738, sumPaidSoFar: 88767, x: 3, y: 921166 },
        { sumInterestPaidSoFar: 12808, sumPaidSoFar: 118356, x: 4, y: 894712 },
        { sumInterestPaidSoFar: 15791, sumPaidSoFar: 147945, x: 5, y: 868171 },
        { sumInterestPaidSoFar: 18685, sumPaidSoFar: 177534, x: 6, y: 841541 },
        { sumInterestPaidSoFar: 21490, sumPaidSoFar: 207123, x: 7, y: 814822 },
        { sumInterestPaidSoFar: 24206, sumPaidSoFar: 236712, x: 8, y: 788014 },
        { sumInterestPaidSoFar: 26833, sumPaidSoFar: 266301, x: 9, y: 761117 },
        { sumInterestPaidSoFar: 29370, sumPaidSoFar: 295890, x: 10, y: 734130 },
        { sumInterestPaidSoFar: 31817, sumPaidSoFar: 325479, x: 11, y: 707053 },
        { sumInterestPaidSoFar: 34174, sumPaidSoFar: 355068, x: 12, y: 679886 },
        { sumInterestPaidSoFar: 36440, sumPaidSoFar: 384657, x: 13, y: 652628 },
        { sumInterestPaidSoFar: 38615, sumPaidSoFar: 414246, x: 14, y: 625279 },
        { sumInterestPaidSoFar: 40700, sumPaidSoFar: 443835, x: 15, y: 597840 },
        { sumInterestPaidSoFar: 42692, sumPaidSoFar: 473424, x: 16, y: 570308 },
        { sumInterestPaidSoFar: 44593, sumPaidSoFar: 503013, x: 17, y: 542685 },
        { sumInterestPaidSoFar: 46402, sumPaidSoFar: 532602, x: 18, y: 514970 },
        { sumInterestPaidSoFar: 48119, sumPaidSoFar: 562191, x: 19, y: 487163 },
        { sumInterestPaidSoFar: 49743, sumPaidSoFar: 591780, x: 20, y: 459263 },
        { sumInterestPaidSoFar: 51274, sumPaidSoFar: 621369, x: 21, y: 431270 },
        { sumInterestPaidSoFar: 52711, sumPaidSoFar: 650958, x: 22, y: 403183 },
        { sumInterestPaidSoFar: 54055, sumPaidSoFar: 680547, x: 23, y: 375003 },
        { sumInterestPaidSoFar: 55305, sumPaidSoFar: 710136, x: 24, y: 346729 },
        { sumInterestPaidSoFar: 56461, sumPaidSoFar: 739725, x: 25, y: 318361 },
        { sumInterestPaidSoFar: 57522, sumPaidSoFar: 769314, x: 26, y: 289898 },
        { sumInterestPaidSoFar: 58488, sumPaidSoFar: 798903, x: 27, y: 261340 },
        { sumInterestPaidSoFar: 59360, sumPaidSoFar: 828492, x: 28, y: 232688 },
        { sumInterestPaidSoFar: 60135, sumPaidSoFar: 858081, x: 29, y: 203939 },
        { sumInterestPaidSoFar: 60815, sumPaidSoFar: 887670, x: 30, y: 175095 },
        { sumInterestPaidSoFar: 61399, sumPaidSoFar: 917259, x: 31, y: 146155 },
        { sumInterestPaidSoFar: 61886, sumPaidSoFar: 946848, x: 32, y: 117118 },
        { sumInterestPaidSoFar: 62276, sumPaidSoFar: 976437, x: 33, y: 87984 },
        { sumInterestPaidSoFar: 62570, sumPaidSoFar: 1006026, x: 34, y: 58754 },
        { sumInterestPaidSoFar: 62765, sumPaidSoFar: 1035615, x: 35, y: 29425 },
        { sumInterestPaidSoFar: 62863, sumPaidSoFar: 1065203, x: 36, y: 0 },
      ],
      restSerie: [
        { x: 0, y: 0 },
        { x: 1, y: 411 },
        { x: 2, y: 822 },
        { x: 3, y: 1233 },
        { x: 4, y: 1644 },
        { x: 5, y: 2055 },
        { x: 6, y: 2466 },
        { x: 7, y: 2877 },
        { x: 8, y: 3288 },
        { x: 9, y: 3699 },
        { x: 10, y: 4110 },
        { x: 11, y: 4521 },
        { x: 12, y: 4932 },
        { x: 13, y: 5343 },
        { x: 14, y: 5754 },
        { x: 15, y: 6165 },
        { x: 16, y: 6576 },
        { x: 17, y: 6987 },
        { x: 18, y: 7398 },
        { x: 19, y: 7809 },
        { x: 20, y: 8220 },
        { x: 21, y: 8631 },
        { x: 22, y: 9042 },
        { x: 23, y: 9453 },
        { x: 24, y: 9864 },
        { x: 25, y: 10275 },
        { x: 26, y: 10686 },
        { x: 27, y: 11097 },
        { x: 28, y: 11508 },
        { x: 29, y: 11919 },
        { x: 30, y: 12330 },
        { x: 31, y: 12741 },
        { x: 32, y: 13152 },
        { x: 33, y: 13563 },
        { x: 34, y: 13974 },
        { x: 35, y: 14385 },
        { x: 36, y: 14797 },
      ],
      restSerieNotAggregated: [
        { x: 0, y: 0 },
        { x: 1, y: 411 },
        { x: 2, y: 822 },
        { x: 3, y: 1233 },
        { x: 4, y: 1644 },
        { x: 5, y: 2055 },
        { x: 6, y: 2466 },
        { x: 7, y: 2877 },
        { x: 8, y: 3288 },
        { x: 9, y: 3699 },
        { x: 10, y: 4110 },
        { x: 11, y: 4521 },
        { x: 12, y: 4932 },
        { x: 13, y: 5343 },
        { x: 14, y: 5754 },
        { x: 15, y: 6165 },
        { x: 16, y: 6576 },
        { x: 17, y: 6987 },
        { x: 18, y: 7398 },
        { x: 19, y: 7809 },
        { x: 20, y: 8220 },
        { x: 21, y: 8631 },
        { x: 22, y: 9042 },
        { x: 23, y: 9453 },
        { x: 24, y: 9864 },
        { x: 25, y: 10275 },
        { x: 26, y: 10686 },
        { x: 27, y: 11097 },
        { x: 28, y: 11508 },
        { x: 29, y: 11919 },
        { x: 30, y: 12330 },
        { x: 31, y: 12741 },
        { x: 32, y: 13152 },
        { x: 33, y: 13563 },
        { x: 34, y: 13974 },
        { x: 35, y: 14385 },
        { x: 36, y: 14797 },
      ],
    };

    expect<DebtSerieSelectorResult>(selectDebtSeries(appState)).toEqual(expected);
  });

  it("One loan - Serie", () => {
    const appState: Partial<AppState> = {
      ...store.getState(),
      debts: {
        ids: ["1"],
        entities: {
          "1": {
            id: "1",
            amount: 1000000,
            fee: 65,
            interest: "4",
            name: "One loan - Serie",
            type: "serie",
            termins: 36,
          },
        },
      },
      result: {
        useTowardsDebt: "40000",
        useTowardsDebtType: "number",
      },
    };

    const expected: DebtSerieSelectorResult = {
      debtRestIntersection: 27,
      resolution: "Month",
      events: [
        {
          debt: {
            initial: {
              id: "1",
              name: "One loan - Serie",
              fee: 65,
              interest: "4",
              amount: 1000000,
              type: "serie",
              termins: 36,
            },
            history: [
              {
                month: 1,
                paidSoFar: BigNumber.BigNumber(31176.33),
                remaining: BigNumber.BigNumber(972222),
                interestPaidSoFar: BigNumber.BigNumber(3333.33),
                terminResult: {
                  newRest: BigNumber.BigNumber(8823.67),
                  newDebt: BigNumber.BigNumber(972222),
                  interestAmount: BigNumber.BigNumber(3333.33),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(31176.33),
                },
              },
              {
                month: 2,
                paidSoFar: BigNumber.BigNumber(62260.07),
                remaining: BigNumber.BigNumber(944444),
                interestPaidSoFar: BigNumber.BigNumber(6574.07),
                terminResult: {
                  newRest: BigNumber.BigNumber(8916.26),
                  newDebt: BigNumber.BigNumber(944444),
                  interestAmount: BigNumber.BigNumber(3240.74),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(31083.74),
                },
              },
              {
                month: 3,
                paidSoFar: BigNumber.BigNumber(93251.22),
                remaining: BigNumber.BigNumber(916666),
                interestPaidSoFar: BigNumber.BigNumber(9722.22),
                terminResult: {
                  newRest: BigNumber.BigNumber(9008.85),
                  newDebt: BigNumber.BigNumber(916666),
                  interestAmount: BigNumber.BigNumber(3148.15),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(30991.15),
                },
              },
              {
                month: 4,
                paidSoFar: BigNumber.BigNumber(124149.77),
                remaining: BigNumber.BigNumber(888888),
                interestPaidSoFar: BigNumber.BigNumber(12777.77),
                terminResult: {
                  newRest: BigNumber.BigNumber(9101.45),
                  newDebt: BigNumber.BigNumber(888888),
                  interestAmount: BigNumber.BigNumber(3055.55),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(30898.55),
                },
              },
              {
                month: 5,
                paidSoFar: BigNumber.BigNumber(154955.73),
                remaining: BigNumber.BigNumber(861110),
                interestPaidSoFar: BigNumber.BigNumber(15740.73),
                terminResult: {
                  newRest: BigNumber.BigNumber(9194.04),
                  newDebt: BigNumber.BigNumber(861110),
                  interestAmount: BigNumber.BigNumber(2962.96),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(30805.96),
                },
              },
              {
                month: 6,
                paidSoFar: BigNumber.BigNumber(185669.1),
                remaining: BigNumber.BigNumber(833332),
                interestPaidSoFar: BigNumber.BigNumber(18611.1),
                terminResult: {
                  newRest: BigNumber.BigNumber(9286.63),
                  newDebt: BigNumber.BigNumber(833332),
                  interestAmount: BigNumber.BigNumber(2870.37),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(30713.37),
                },
              },
              {
                month: 7,
                paidSoFar: BigNumber.BigNumber(216289.87),
                remaining: BigNumber.BigNumber(805554),
                interestPaidSoFar: BigNumber.BigNumber(21388.87),
                terminResult: {
                  newRest: BigNumber.BigNumber(9379.23),
                  newDebt: BigNumber.BigNumber(805554),
                  interestAmount: BigNumber.BigNumber(2777.77),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(30620.77),
                },
              },
              {
                month: 8,
                paidSoFar: BigNumber.BigNumber(246818.05),
                remaining: BigNumber.BigNumber(777776),
                interestPaidSoFar: BigNumber.BigNumber(24074.05),
                terminResult: {
                  newRest: BigNumber.BigNumber(9471.82),
                  newDebt: BigNumber.BigNumber(777776),
                  interestAmount: BigNumber.BigNumber(2685.18),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(30528.18),
                },
              },
              {
                month: 9,
                paidSoFar: BigNumber.BigNumber(277253.64),
                remaining: BigNumber.BigNumber(749998),
                interestPaidSoFar: BigNumber.BigNumber(26666.64),
                terminResult: {
                  newRest: BigNumber.BigNumber(9564.41),
                  newDebt: BigNumber.BigNumber(749998),
                  interestAmount: BigNumber.BigNumber(2592.59),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(30435.59),
                },
              },
              {
                month: 10,
                paidSoFar: BigNumber.BigNumber(307596.63),
                remaining: BigNumber.BigNumber(722220),
                interestPaidSoFar: BigNumber.BigNumber(29166.63),
                terminResult: {
                  newRest: BigNumber.BigNumber(9657.01),
                  newDebt: BigNumber.BigNumber(722220),
                  interestAmount: BigNumber.BigNumber(2499.99),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(30342.99),
                },
              },
              {
                month: 11,
                paidSoFar: BigNumber.BigNumber(337847.03),
                remaining: BigNumber.BigNumber(694442),
                interestPaidSoFar: BigNumber.BigNumber(31574.03),
                terminResult: {
                  newRest: BigNumber.BigNumber(9749.6),
                  newDebt: BigNumber.BigNumber(694442),
                  interestAmount: BigNumber.BigNumber(2407.4),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(30250.4),
                },
              },
              {
                month: 12,
                paidSoFar: BigNumber.BigNumber(368004.84),
                remaining: BigNumber.BigNumber(666664),
                interestPaidSoFar: BigNumber.BigNumber(33888.84),
                terminResult: {
                  newRest: BigNumber.BigNumber(9842.19),
                  newDebt: BigNumber.BigNumber(666664),
                  interestAmount: BigNumber.BigNumber(2314.81),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(30157.81),
                },
              },
              {
                month: 13,
                paidSoFar: BigNumber.BigNumber(398070.05),
                remaining: BigNumber.BigNumber(638886),
                interestPaidSoFar: BigNumber.BigNumber(36111.05),
                terminResult: {
                  newRest: BigNumber.BigNumber(9934.79),
                  newDebt: BigNumber.BigNumber(638886),
                  interestAmount: BigNumber.BigNumber(2222.21),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(30065.21),
                },
              },
              {
                month: 14,
                paidSoFar: BigNumber.BigNumber(428042.67),
                remaining: BigNumber.BigNumber(611108),
                interestPaidSoFar: BigNumber.BigNumber(38240.67),
                terminResult: {
                  newRest: BigNumber.BigNumber(10027.38),
                  newDebt: BigNumber.BigNumber(611108),
                  interestAmount: BigNumber.BigNumber(2129.62),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(29972.62),
                },
              },
              {
                month: 15,
                paidSoFar: BigNumber.BigNumber(457922.7),
                remaining: BigNumber.BigNumber(583330),
                interestPaidSoFar: BigNumber.BigNumber(40277.7),
                terminResult: {
                  newRest: BigNumber.BigNumber(10119.97),
                  newDebt: BigNumber.BigNumber(583330),
                  interestAmount: BigNumber.BigNumber(2037.03),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(29880.03),
                },
              },
              {
                month: 16,
                paidSoFar: BigNumber.BigNumber(487710.13),
                remaining: BigNumber.BigNumber(555552),
                interestPaidSoFar: BigNumber.BigNumber(42222.13),
                terminResult: {
                  newRest: BigNumber.BigNumber(10212.57),
                  newDebt: BigNumber.BigNumber(555552),
                  interestAmount: BigNumber.BigNumber(1944.43),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(29787.43),
                },
              },
              {
                month: 17,
                paidSoFar: BigNumber.BigNumber(517404.97),
                remaining: BigNumber.BigNumber(527774),
                interestPaidSoFar: BigNumber.BigNumber(44073.97),
                terminResult: {
                  newRest: BigNumber.BigNumber(10305.16),
                  newDebt: BigNumber.BigNumber(527774),
                  interestAmount: BigNumber.BigNumber(1851.84),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(29694.84),
                },
              },
              {
                month: 18,
                paidSoFar: BigNumber.BigNumber(547007.22),
                remaining: BigNumber.BigNumber(499996),
                interestPaidSoFar: BigNumber.BigNumber(45833.22),
                terminResult: {
                  newRest: BigNumber.BigNumber(10397.75),
                  newDebt: BigNumber.BigNumber(499996),
                  interestAmount: BigNumber.BigNumber(1759.25),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(29602.25),
                },
              },
              {
                month: 19,
                paidSoFar: BigNumber.BigNumber(576516.87),
                remaining: BigNumber.BigNumber(472218),
                interestPaidSoFar: BigNumber.BigNumber(47499.87),
                terminResult: {
                  newRest: BigNumber.BigNumber(10490.35),
                  newDebt: BigNumber.BigNumber(472218),
                  interestAmount: BigNumber.BigNumber(1666.65),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(29509.65),
                },
              },
              {
                month: 20,
                paidSoFar: BigNumber.BigNumber(605933.93),
                remaining: BigNumber.BigNumber(444440),
                interestPaidSoFar: BigNumber.BigNumber(49073.93),
                terminResult: {
                  newRest: BigNumber.BigNumber(10582.94),
                  newDebt: BigNumber.BigNumber(444440),
                  interestAmount: BigNumber.BigNumber(1574.06),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(29417.06),
                },
              },
              {
                month: 21,
                paidSoFar: BigNumber.BigNumber(635258.4),
                remaining: BigNumber.BigNumber(416662),
                interestPaidSoFar: BigNumber.BigNumber(50555.4),
                terminResult: {
                  newRest: BigNumber.BigNumber(10675.53),
                  newDebt: BigNumber.BigNumber(416662),
                  interestAmount: BigNumber.BigNumber(1481.47),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(29324.47),
                },
              },
              {
                month: 22,
                paidSoFar: BigNumber.BigNumber(664490.27),
                remaining: BigNumber.BigNumber(388884),
                interestPaidSoFar: BigNumber.BigNumber(51944.27),
                terminResult: {
                  newRest: BigNumber.BigNumber(10768.13),
                  newDebt: BigNumber.BigNumber(388884),
                  interestAmount: BigNumber.BigNumber(1388.87),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(29231.87),
                },
              },
              {
                month: 23,
                paidSoFar: BigNumber.BigNumber(693629.55),
                remaining: BigNumber.BigNumber(361106),
                interestPaidSoFar: BigNumber.BigNumber(53240.55),
                terminResult: {
                  newRest: BigNumber.BigNumber(10860.72),
                  newDebt: BigNumber.BigNumber(361106),
                  interestAmount: BigNumber.BigNumber(1296.28),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(29139.28),
                },
              },
              {
                month: 24,
                paidSoFar: BigNumber.BigNumber(722676.24),
                remaining: BigNumber.BigNumber(333328),
                interestPaidSoFar: BigNumber.BigNumber(54444.24),
                terminResult: {
                  newRest: BigNumber.BigNumber(10953.31),
                  newDebt: BigNumber.BigNumber(333328),
                  interestAmount: BigNumber.BigNumber(1203.69),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(29046.69),
                },
              },
              {
                month: 25,
                paidSoFar: BigNumber.BigNumber(751630.33),
                remaining: BigNumber.BigNumber(305550),
                interestPaidSoFar: BigNumber.BigNumber(55555.33),
                terminResult: {
                  newRest: BigNumber.BigNumber(11045.91),
                  newDebt: BigNumber.BigNumber(305550),
                  interestAmount: BigNumber.BigNumber(1111.09),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(28954.09),
                },
              },
              {
                month: 26,
                paidSoFar: BigNumber.BigNumber(780491.83),
                remaining: BigNumber.BigNumber(277772),
                interestPaidSoFar: BigNumber.BigNumber(56573.83),
                terminResult: {
                  newRest: BigNumber.BigNumber(11138.5),
                  newDebt: BigNumber.BigNumber(277772),
                  interestAmount: BigNumber.BigNumber(1018.5),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(28861.5),
                },
              },
              {
                month: 27,
                paidSoFar: BigNumber.BigNumber(809260.74),
                remaining: BigNumber.BigNumber(249994),
                interestPaidSoFar: BigNumber.BigNumber(57499.74),
                terminResult: {
                  newRest: BigNumber.BigNumber(11231.09),
                  newDebt: BigNumber.BigNumber(249994),
                  interestAmount: BigNumber.BigNumber(925.91),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(28768.91),
                },
              },
              {
                month: 28,
                paidSoFar: BigNumber.BigNumber(837937.05),
                remaining: BigNumber.BigNumber(222216),
                interestPaidSoFar: BigNumber.BigNumber(58333.05),
                terminResult: {
                  newRest: BigNumber.BigNumber(11323.69),
                  newDebt: BigNumber.BigNumber(222216),
                  interestAmount: BigNumber.BigNumber(833.31),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(28676.31),
                },
              },
              {
                month: 29,
                paidSoFar: BigNumber.BigNumber(866520.77),
                remaining: BigNumber.BigNumber(194438),
                interestPaidSoFar: BigNumber.BigNumber(59073.77),
                terminResult: {
                  newRest: BigNumber.BigNumber(11416.28),
                  newDebt: BigNumber.BigNumber(194438),
                  interestAmount: BigNumber.BigNumber(740.72),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(28583.72),
                },
              },
              {
                month: 30,
                paidSoFar: BigNumber.BigNumber(895011.9),
                remaining: BigNumber.BigNumber(166660),
                interestPaidSoFar: BigNumber.BigNumber(59721.9),
                terminResult: {
                  newRest: BigNumber.BigNumber(11508.87),
                  newDebt: BigNumber.BigNumber(166660),
                  interestAmount: BigNumber.BigNumber(648.13),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(28491.13),
                },
              },
              {
                month: 31,
                paidSoFar: BigNumber.BigNumber(923410.43),
                remaining: BigNumber.BigNumber(138882),
                interestPaidSoFar: BigNumber.BigNumber(60277.43),
                terminResult: {
                  newRest: BigNumber.BigNumber(11601.47),
                  newDebt: BigNumber.BigNumber(138882),
                  interestAmount: BigNumber.BigNumber(555.53),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(28398.53),
                },
              },
              {
                month: 32,
                paidSoFar: BigNumber.BigNumber(951716.37),
                remaining: BigNumber.BigNumber(111104),
                interestPaidSoFar: BigNumber.BigNumber(60740.37),
                terminResult: {
                  newRest: BigNumber.BigNumber(11694.06),
                  newDebt: BigNumber.BigNumber(111104),
                  interestAmount: BigNumber.BigNumber(462.94),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(28305.94),
                },
              },
              {
                month: 33,
                paidSoFar: BigNumber.BigNumber(979929.72),
                remaining: BigNumber.BigNumber(83326),
                interestPaidSoFar: BigNumber.BigNumber(61110.72),
                terminResult: {
                  newRest: BigNumber.BigNumber(11786.65),
                  newDebt: BigNumber.BigNumber(83326),
                  interestAmount: BigNumber.BigNumber(370.35),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(28213.35),
                },
              },
              {
                month: 34,
                paidSoFar: BigNumber.BigNumber(1008050.47),
                remaining: BigNumber.BigNumber(55548),
                interestPaidSoFar: BigNumber.BigNumber(61388.47),
                terminResult: {
                  newRest: BigNumber.BigNumber(11879.25),
                  newDebt: BigNumber.BigNumber(55548),
                  interestAmount: BigNumber.BigNumber(277.75),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(28120.75),
                },
              },
              {
                month: 35,
                paidSoFar: BigNumber.BigNumber(1036078.63),
                remaining: BigNumber.BigNumber(27770),
                interestPaidSoFar: BigNumber.BigNumber(61573.63),
                terminResult: {
                  newRest: BigNumber.BigNumber(11971.84),
                  newDebt: BigNumber.BigNumber(27770),
                  interestAmount: BigNumber.BigNumber(185.16),
                  principalAmount: BigNumber.BigNumber(27778),
                  terminAmount: BigNumber.BigNumber(28028.16),
                },
              },
              {
                month: 36,
                paidSoFar: BigNumber.BigNumber(1064006.2),
                remaining: BigNumber.BigNumber(0),
                interestPaidSoFar: BigNumber.BigNumber(61666.2),
                terminResult: {
                  newRest: BigNumber.BigNumber(12072.43),
                  newDebt: BigNumber.BigNumber(0),
                  interestAmount: BigNumber.BigNumber(92.57),
                  principalAmount: BigNumber.BigNumber(27770),
                  terminAmount: BigNumber.BigNumber(27927.57),
                },
              },
            ],
            processed: {
              interestPaidSoFar: BigNumber.BigNumber(61666.2),
              paidSoFar: BigNumber.BigNumber(1064006.2),
              remaining: BigNumber.BigNumber(0),
            },
          },
          month: 36,
          type: "DEBT_PAID_OFF",
        },
      ],
      serie: [
        { sumInterestPaidSoFar: 0, sumPaidSoFar: 0, x: 0, y: 1000000 },
        { sumInterestPaidSoFar: 3333, sumPaidSoFar: 31176, x: 1, y: 972222 },
        { sumInterestPaidSoFar: 6574, sumPaidSoFar: 62260, x: 2, y: 944444 },
        { sumInterestPaidSoFar: 9722, sumPaidSoFar: 93251, x: 3, y: 916666 },
        { sumInterestPaidSoFar: 12778, sumPaidSoFar: 124150, x: 4, y: 888888 },
        { sumInterestPaidSoFar: 15741, sumPaidSoFar: 154956, x: 5, y: 861110 },
        { sumInterestPaidSoFar: 18611, sumPaidSoFar: 185669, x: 6, y: 833332 },
        { sumInterestPaidSoFar: 21389, sumPaidSoFar: 216290, x: 7, y: 805554 },
        { sumInterestPaidSoFar: 24074, sumPaidSoFar: 246818, x: 8, y: 777776 },
        { sumInterestPaidSoFar: 26667, sumPaidSoFar: 277254, x: 9, y: 749998 },
        { sumInterestPaidSoFar: 29167, sumPaidSoFar: 307597, x: 10, y: 722220 },
        { sumInterestPaidSoFar: 31574, sumPaidSoFar: 337847, x: 11, y: 694442 },
        { sumInterestPaidSoFar: 33889, sumPaidSoFar: 368005, x: 12, y: 666664 },
        { sumInterestPaidSoFar: 36111, sumPaidSoFar: 398070, x: 13, y: 638886 },
        { sumInterestPaidSoFar: 38241, sumPaidSoFar: 428043, x: 14, y: 611108 },
        { sumInterestPaidSoFar: 40278, sumPaidSoFar: 457923, x: 15, y: 583330 },
        { sumInterestPaidSoFar: 42222, sumPaidSoFar: 487710, x: 16, y: 555552 },
        { sumInterestPaidSoFar: 44074, sumPaidSoFar: 517405, x: 17, y: 527774 },
        { sumInterestPaidSoFar: 45833, sumPaidSoFar: 547007, x: 18, y: 499996 },
        { sumInterestPaidSoFar: 47500, sumPaidSoFar: 576517, x: 19, y: 472218 },
        { sumInterestPaidSoFar: 49074, sumPaidSoFar: 605934, x: 20, y: 444440 },
        { sumInterestPaidSoFar: 50555, sumPaidSoFar: 635258, x: 21, y: 416662 },
        { sumInterestPaidSoFar: 51944, sumPaidSoFar: 664490, x: 22, y: 388884 },
        { sumInterestPaidSoFar: 53241, sumPaidSoFar: 693630, x: 23, y: 361106 },
        { sumInterestPaidSoFar: 54444, sumPaidSoFar: 722676, x: 24, y: 333328 },
        { sumInterestPaidSoFar: 55555, sumPaidSoFar: 751630, x: 25, y: 305550 },
        { sumInterestPaidSoFar: 56574, sumPaidSoFar: 780492, x: 26, y: 277772 },
        { sumInterestPaidSoFar: 57500, sumPaidSoFar: 809261, x: 27, y: 249994 },
        { sumInterestPaidSoFar: 58333, sumPaidSoFar: 837937, x: 28, y: 222216 },
        { sumInterestPaidSoFar: 59074, sumPaidSoFar: 866521, x: 29, y: 194438 },
        { sumInterestPaidSoFar: 59722, sumPaidSoFar: 895012, x: 30, y: 166660 },
        { sumInterestPaidSoFar: 60277, sumPaidSoFar: 923410, x: 31, y: 138882 },
        { sumInterestPaidSoFar: 60740, sumPaidSoFar: 951716, x: 32, y: 111104 },
        { sumInterestPaidSoFar: 61111, sumPaidSoFar: 979930, x: 33, y: 83326 },
        { sumInterestPaidSoFar: 61388, sumPaidSoFar: 1008050, x: 34, y: 55548 },
        { sumInterestPaidSoFar: 61574, sumPaidSoFar: 1036079, x: 35, y: 27770 },
        { sumInterestPaidSoFar: 61666, sumPaidSoFar: 1064006, x: 36, y: 0 }, // Off by 9
      ],
      restSerie: [
        { x: 0, y: 0 },
        { x: 1, y: 8824 },
        { x: 2, y: 17740 },
        { x: 3, y: 26749 },
        { x: 4, y: 35850 },
        { x: 5, y: 45044 },
        { x: 6, y: 54331 },
        { x: 7, y: 63710 },
        { x: 8, y: 73182 },
        { x: 9, y: 82746 },
        { x: 10, y: 92403 },
        { x: 11, y: 102153 },
        { x: 12, y: 111995 },
        { x: 13, y: 121930 },
        { x: 14, y: 131957 },
        { x: 15, y: 142077 },
        { x: 16, y: 152290 },
        { x: 17, y: 162595 },
        { x: 18, y: 172993 },
        { x: 19, y: 183483 },
        { x: 20, y: 194066 },
        { x: 21, y: 204742 },
        { x: 22, y: 215510 },
        { x: 23, y: 226370 },
        { x: 24, y: 237324 },
        { x: 25, y: 248370 },
        { x: 26, y: 259508 },
        { x: 27, y: 270739 },
        { x: 28, y: 282063 },
        { x: 29, y: 293479 },
        { x: 30, y: 304988 },
        { x: 31, y: 316590 },
        { x: 32, y: 328284 },
        { x: 33, y: 340070 },
        { x: 34, y: 351950 },
        { x: 35, y: 363921 },
        { x: 36, y: 375994 },
      ],
      restSerieNotAggregated: [
        { x: 0, y: 0 },
        { x: 1, y: 8824 },
        { x: 2, y: 17740 },
        { x: 3, y: 26749 },
        { x: 4, y: 35850 },
        { x: 5, y: 45044 },
        { x: 6, y: 54331 },
        { x: 7, y: 63710 },
        { x: 8, y: 73182 },
        { x: 9, y: 82746 },
        { x: 10, y: 92403 },
        { x: 11, y: 102153 },
        { x: 12, y: 111995 },
        { x: 13, y: 121930 },
        { x: 14, y: 131957 },
        { x: 15, y: 142077 },
        { x: 16, y: 152290 },
        { x: 17, y: 162595 },
        { x: 18, y: 172993 },
        { x: 19, y: 183483 },
        { x: 20, y: 194066 },
        { x: 21, y: 204742 },
        { x: 22, y: 215510 },
        { x: 23, y: 226370 },
        { x: 24, y: 237324 },
        { x: 25, y: 248370 },
        { x: 26, y: 259508 },
        { x: 27, y: 270739 },
        { x: 28, y: 282063 },
        { x: 29, y: 293479 },
        { x: 30, y: 304988 },
        { x: 31, y: 316590 },
        { x: 32, y: 328284 },
        { x: 33, y: 340070 },
        { x: 34, y: 351950 },
        { x: 35, y: 363921 },
        { x: 36, y: 375994 },
      ],
    };

    expect<DebtSerieSelectorResult>(selectDebtSeries(appState)).toEqual(expected);
  });

  it("One loan - Credit", () => {
    const appState: Partial<AppState> = {
      ...store.getState(),
      debts: {
        ids: ["1"],
        entities: {
          "1": {
            id: "1",
            amount: 100000,
            fee: 100,
            interest: "20",
            name: "One loan - Credit",
            type: "credit",
          },
        },
      },
      result: {
        useTowardsDebt: "5000",
        useTowardsDebtType: "number",
      },
    };

    const expected: DebtSerieSelectorResult = {
      debtRestIntersection: 26,
      resolution: "Month",
      events: [
        {
          debt: {
            initial: {
              id: "1",
              name: "One loan - Credit",
              fee: 100,
              interest: "20",
              amount: 100000,
              type: "credit",
            },
            history: [
              {
                month: 1,
                paidSoFar: BigNumber.BigNumber(5000),
                remaining: BigNumber.BigNumber(96766.67),
                interestPaidSoFar: BigNumber.BigNumber(1666.67),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(96766.67),
                  interestAmount: BigNumber.BigNumber(1666.67),
                  principalAmount: BigNumber.BigNumber(3233.33),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 2,
                paidSoFar: BigNumber.BigNumber(10000),
                remaining: BigNumber.BigNumber(93479.45),
                interestPaidSoFar: BigNumber.BigNumber(3279.45),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(93479.45),
                  interestAmount: BigNumber.BigNumber(1612.78),
                  principalAmount: BigNumber.BigNumber(3287.22),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 3,
                paidSoFar: BigNumber.BigNumber(15000),
                remaining: BigNumber.BigNumber(90137.44),
                interestPaidSoFar: BigNumber.BigNumber(4837.44),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(90137.44),
                  interestAmount: BigNumber.BigNumber(1557.99),
                  principalAmount: BigNumber.BigNumber(3342.01),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 4,
                paidSoFar: BigNumber.BigNumber(20000),
                remaining: BigNumber.BigNumber(86739.73),
                interestPaidSoFar: BigNumber.BigNumber(6339.73),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(86739.73),
                  interestAmount: BigNumber.BigNumber(1502.29),
                  principalAmount: BigNumber.BigNumber(3397.71),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 5,
                paidSoFar: BigNumber.BigNumber(25000),
                remaining: BigNumber.BigNumber(83285.39),
                interestPaidSoFar: BigNumber.BigNumber(7785.39),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(83285.39),
                  interestAmount: BigNumber.BigNumber(1445.66),
                  principalAmount: BigNumber.BigNumber(3454.34),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 6,
                paidSoFar: BigNumber.BigNumber(30000),
                remaining: BigNumber.BigNumber(79773.48),
                interestPaidSoFar: BigNumber.BigNumber(9173.48),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(79773.48),
                  interestAmount: BigNumber.BigNumber(1388.09),
                  principalAmount: BigNumber.BigNumber(3511.91),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 7,
                paidSoFar: BigNumber.BigNumber(35000),
                remaining: BigNumber.BigNumber(76203.04),
                interestPaidSoFar: BigNumber.BigNumber(10503.04),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(76203.04),
                  interestAmount: BigNumber.BigNumber(1329.56),
                  principalAmount: BigNumber.BigNumber(3570.44),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 8,
                paidSoFar: BigNumber.BigNumber(40000),
                remaining: BigNumber.BigNumber(72573.09),
                interestPaidSoFar: BigNumber.BigNumber(11773.09),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(72573.09),
                  interestAmount: BigNumber.BigNumber(1270.05),
                  principalAmount: BigNumber.BigNumber(3629.95),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 9,
                paidSoFar: BigNumber.BigNumber(45000),
                remaining: BigNumber.BigNumber(68882.64),
                interestPaidSoFar: BigNumber.BigNumber(12982.64),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(68882.64),
                  interestAmount: BigNumber.BigNumber(1209.55),
                  principalAmount: BigNumber.BigNumber(3690.45),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 10,
                paidSoFar: BigNumber.BigNumber(50000),
                remaining: BigNumber.BigNumber(65130.68),
                interestPaidSoFar: BigNumber.BigNumber(14130.68),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(65130.68),
                  interestAmount: BigNumber.BigNumber(1148.04),
                  principalAmount: BigNumber.BigNumber(3751.96),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 11,
                paidSoFar: BigNumber.BigNumber(55000),
                remaining: BigNumber.BigNumber(61316.19),
                interestPaidSoFar: BigNumber.BigNumber(15216.19),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(61316.19),
                  interestAmount: BigNumber.BigNumber(1085.51),
                  principalAmount: BigNumber.BigNumber(3814.49),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 12,
                paidSoFar: BigNumber.BigNumber(60000),
                remaining: BigNumber.BigNumber(57438.13),
                interestPaidSoFar: BigNumber.BigNumber(16238.13),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(57438.13),
                  interestAmount: BigNumber.BigNumber(1021.94),
                  principalAmount: BigNumber.BigNumber(3878.06),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 13,
                paidSoFar: BigNumber.BigNumber(65000),
                remaining: BigNumber.BigNumber(53495.43),
                interestPaidSoFar: BigNumber.BigNumber(17195.43),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(53495.43),
                  interestAmount: BigNumber.BigNumber(957.3),
                  principalAmount: BigNumber.BigNumber(3942.7),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 14,
                paidSoFar: BigNumber.BigNumber(70000),
                remaining: BigNumber.BigNumber(49487.02),
                interestPaidSoFar: BigNumber.BigNumber(18087.02),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(49487.02),
                  interestAmount: BigNumber.BigNumber(891.59),
                  principalAmount: BigNumber.BigNumber(4008.41),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 15,
                paidSoFar: BigNumber.BigNumber(75000),
                remaining: BigNumber.BigNumber(45411.8),
                interestPaidSoFar: BigNumber.BigNumber(18911.8),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(45411.8),
                  interestAmount: BigNumber.BigNumber(824.78),
                  principalAmount: BigNumber.BigNumber(4075.22),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 16,
                paidSoFar: BigNumber.BigNumber(80000),
                remaining: BigNumber.BigNumber(41268.66),
                interestPaidSoFar: BigNumber.BigNumber(19668.66),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(41268.66),
                  interestAmount: BigNumber.BigNumber(756.86),
                  principalAmount: BigNumber.BigNumber(4143.14),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 17,
                paidSoFar: BigNumber.BigNumber(85000),
                remaining: BigNumber.BigNumber(37056.47),
                interestPaidSoFar: BigNumber.BigNumber(20356.47),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(37056.47),
                  interestAmount: BigNumber.BigNumber(687.81),
                  principalAmount: BigNumber.BigNumber(4212.19),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 18,
                paidSoFar: BigNumber.BigNumber(90000),
                remaining: BigNumber.BigNumber(32774.08),
                interestPaidSoFar: BigNumber.BigNumber(20974.08),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(32774.08),
                  interestAmount: BigNumber.BigNumber(617.61),
                  principalAmount: BigNumber.BigNumber(4282.39),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 19,
                paidSoFar: BigNumber.BigNumber(95000),
                remaining: BigNumber.BigNumber(28420.31),
                interestPaidSoFar: BigNumber.BigNumber(21520.31),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(28420.31),
                  interestAmount: BigNumber.BigNumber(546.23),
                  principalAmount: BigNumber.BigNumber(4353.77),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 20,
                paidSoFar: BigNumber.BigNumber(100000),
                remaining: BigNumber.BigNumber(23993.98),
                interestPaidSoFar: BigNumber.BigNumber(21993.98),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(23993.98),
                  interestAmount: BigNumber.BigNumber(473.67),
                  principalAmount: BigNumber.BigNumber(4426.33),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 21,
                paidSoFar: BigNumber.BigNumber(105000),
                remaining: BigNumber.BigNumber(19493.88),
                interestPaidSoFar: BigNumber.BigNumber(22393.88),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(19493.88),
                  interestAmount: BigNumber.BigNumber(399.9),
                  principalAmount: BigNumber.BigNumber(4500.1),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 22,
                paidSoFar: BigNumber.BigNumber(110000),
                remaining: BigNumber.BigNumber(14918.78),
                interestPaidSoFar: BigNumber.BigNumber(22718.78),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(14918.78),
                  interestAmount: BigNumber.BigNumber(324.9),
                  principalAmount: BigNumber.BigNumber(4575.1),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 23,
                paidSoFar: BigNumber.BigNumber(115000),
                remaining: BigNumber.BigNumber(10267.43),
                interestPaidSoFar: BigNumber.BigNumber(22967.43),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(10267.43),
                  interestAmount: BigNumber.BigNumber(248.65),
                  principalAmount: BigNumber.BigNumber(4651.35),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 24,
                paidSoFar: BigNumber.BigNumber(120000),
                remaining: BigNumber.BigNumber(5538.55),
                interestPaidSoFar: BigNumber.BigNumber(23138.55),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(5538.55),
                  interestAmount: BigNumber.BigNumber(171.12),
                  principalAmount: BigNumber.BigNumber(4728.88),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 25,
                paidSoFar: BigNumber.BigNumber(125000),
                remaining: BigNumber.BigNumber(730.86),
                interestPaidSoFar: BigNumber.BigNumber(23230.86),
                terminResult: {
                  newRest: BigNumber.BigNumber(0),
                  newDebt: BigNumber.BigNumber(730.86),
                  interestAmount: BigNumber.BigNumber(92.31),
                  principalAmount: BigNumber.BigNumber(4807.69),
                  terminAmount: BigNumber.BigNumber(5000),
                },
              },
              {
                month: 26,
                paidSoFar: BigNumber.BigNumber(125843.04),
                remaining: BigNumber.BigNumber(0),
                interestPaidSoFar: BigNumber.BigNumber(23243.04),
                terminResult: {
                  newRest: BigNumber.BigNumber(4156.96),
                  newDebt: BigNumber.BigNumber(0),
                  interestAmount: BigNumber.BigNumber(12.18),
                  principalAmount: BigNumber.BigNumber(730.86),
                  terminAmount: BigNumber.BigNumber(843.04),
                },
              },
            ],
            processed: {
              interestPaidSoFar: BigNumber.BigNumber(23243.04),
              paidSoFar: BigNumber.BigNumber(125843.04),
              remaining: BigNumber.BigNumber(0),
            },
          },
          month: 26,
          type: "DEBT_PAID_OFF",
        },
      ],
      serie: [
        { sumInterestPaidSoFar: 0, sumPaidSoFar: 0, x: 0, y: 100000 },
        { sumInterestPaidSoFar: 1667, sumPaidSoFar: 5000, x: 1, y: 96767 },
        { sumInterestPaidSoFar: 3279, sumPaidSoFar: 10000, x: 2, y: 93479 },
        { sumInterestPaidSoFar: 4837, sumPaidSoFar: 15000, x: 3, y: 90137 },
        { sumInterestPaidSoFar: 6340, sumPaidSoFar: 20000, x: 4, y: 86740 },
        { sumInterestPaidSoFar: 7785, sumPaidSoFar: 25000, x: 5, y: 83285 },
        { sumInterestPaidSoFar: 9173, sumPaidSoFar: 30000, x: 6, y: 79773 },
        { sumInterestPaidSoFar: 10503, sumPaidSoFar: 35000, x: 7, y: 76203 },
        { sumInterestPaidSoFar: 11773, sumPaidSoFar: 40000, x: 8, y: 72573 },
        { sumInterestPaidSoFar: 12983, sumPaidSoFar: 45000, x: 9, y: 68883 },
        { sumInterestPaidSoFar: 14131, sumPaidSoFar: 50000, x: 10, y: 65131 },
        { sumInterestPaidSoFar: 15216, sumPaidSoFar: 55000, x: 11, y: 61316 },
        { sumInterestPaidSoFar: 16238, sumPaidSoFar: 60000, x: 12, y: 57438 },
        { sumInterestPaidSoFar: 17195, sumPaidSoFar: 65000, x: 13, y: 53495 },
        { sumInterestPaidSoFar: 18087, sumPaidSoFar: 70000, x: 14, y: 49487 },
        { sumInterestPaidSoFar: 18912, sumPaidSoFar: 75000, x: 15, y: 45412 },
        { sumInterestPaidSoFar: 19669, sumPaidSoFar: 80000, x: 16, y: 41269 },
        { sumInterestPaidSoFar: 20356, sumPaidSoFar: 85000, x: 17, y: 37056 },
        { sumInterestPaidSoFar: 20974, sumPaidSoFar: 90000, x: 18, y: 32774 },
        { sumInterestPaidSoFar: 21520, sumPaidSoFar: 95000, x: 19, y: 28420 },
        { sumInterestPaidSoFar: 21994, sumPaidSoFar: 100000, x: 20, y: 23994 },
        { sumInterestPaidSoFar: 22394, sumPaidSoFar: 105000, x: 21, y: 19494 },
        { sumInterestPaidSoFar: 22719, sumPaidSoFar: 110000, x: 22, y: 14919 },
        { sumInterestPaidSoFar: 22967, sumPaidSoFar: 115000, x: 23, y: 10267 },
        { sumInterestPaidSoFar: 23139, sumPaidSoFar: 120000, x: 24, y: 5539 },
        { sumInterestPaidSoFar: 23231, sumPaidSoFar: 125000, x: 25, y: 731 },
        { sumInterestPaidSoFar: 23243, sumPaidSoFar: 125843, x: 26, y: 0 },
      ],
      restSerie: [
        { x: 0, y: 0 },
        { x: 1, y: 0 },
        { x: 2, y: 0 },
        { x: 3, y: 0 },
        { x: 4, y: 0 },
        { x: 5, y: 0 },
        { x: 6, y: 0 },
        { x: 7, y: 0 },
        { x: 8, y: 0 },
        { x: 9, y: 0 },
        { x: 10, y: 0 },
        { x: 11, y: 0 },
        { x: 12, y: 0 },
        { x: 13, y: 0 },
        { x: 14, y: 0 },
        { x: 15, y: 0 },
        { x: 16, y: 0 },
        { x: 17, y: 0 },
        { x: 18, y: 0 },
        { x: 19, y: 0 },
        { x: 20, y: 0 },
        { x: 21, y: 0 },
        { x: 22, y: 0 },
        { x: 23, y: 0 },
        { x: 24, y: 0 },
        { x: 25, y: 0 },
        { x: 26, y: 4157 },
      ],
      restSerieNotAggregated: [
        { x: 0, y: 0 },
        { x: 1, y: 0 },
        { x: 2, y: 0 },
        { x: 3, y: 0 },
        { x: 4, y: 0 },
        { x: 5, y: 0 },
        { x: 6, y: 0 },
        { x: 7, y: 0 },
        { x: 8, y: 0 },
        { x: 9, y: 0 },
        { x: 10, y: 0 },
        { x: 11, y: 0 },
        { x: 12, y: 0 },
        { x: 13, y: 0 },
        { x: 14, y: 0 },
        { x: 15, y: 0 },
        { x: 16, y: 0 },
        { x: 17, y: 0 },
        { x: 18, y: 0 },
        { x: 19, y: 0 },
        { x: 20, y: 0 },
        { x: 21, y: 0 },
        { x: 22, y: 0 },
        { x: 23, y: 0 },
        { x: 24, y: 0 },
        { x: 25, y: 0 },
        { x: 26, y: 4157 },
      ],
    };

    expect<DebtSerieSelectorResult>(selectDebtSeries(appState)).toEqual(expected);
  });
});
